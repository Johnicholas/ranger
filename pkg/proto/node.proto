syntax = "proto3";

option go_package = "github.com/adammck/ranger/pkg/proto";

package ranger;

message Ident {
  string scope = 1;
  uint64 key = 2;
}

message Host {
  string host = 1;
  string port = 2;
}

message Range {
  // Unique for every range.
  Ident ident = 1;

  // Range of the keys in this range.
  bytes start = 2; // inclusive
  bytes end = 3; // exclusive
}

service Node {
  rpc Give (GiveRequest) returns (GiveResponse) {}
}

message GiveRequest {
  Range range = 1;

  // The host which this range is currently assigned to, if applicable.
  Host host = 2;

  // The range(s) which this range was created from, when applicable (i.e. for
  // splits and joins). Nodes may use this info to restore the current state of
  // the range when accepting it.
  repeated Range parents = 3;
}

message GiveResponse {
}
